!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.ReactRouter=e()}}(function(){var e,t,n;return function r(e,t,n){function i(o,u){if(!t[o]){if(!e[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=t[o]={exports:{}};e[o][0].call(f.exports,function(t){var n=e[o][1][t];return i(n?n:t)},f,f.exports,r,e,t,n)}return t[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,n){var r={SETUP:"setup",PUSH:"push",REPLACE:"replace",POP:"pop"};t.exports=r},{}],2:[function(e,t,n){var r=e("../actions/LocationActions");var i={updateScrollPosition:function(e,t){switch(t){case r.PUSH:case r.REPLACE:window.scrollTo(0,0);break;case r.POP:window.scrollTo(e.x,e.y);break}}};t.exports=i},{"../actions/LocationActions":1}],3:[function(e,t,n){var r={updateScrollPosition:function(){window.scrollTo(0,0)}};t.exports=r},{}],4:[function(e,t,n){function s(e){return i(r(e,{path:null,isDefault:true}))}var r=e("react/lib/merge");var i=e("./Route");t.exports=s},{"./Route":8,"react/lib/merge":45}],5:[function(e,t,n){function u(e){return e.button===0}function a(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var r=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var i=e("react/lib/merge");var s=e("../mixins/ActiveState");var o=e("../mixins/Navigation");var f=r.createClass({displayName:"Link",mixins:[s,o],propTypes:{activeClassName:r.PropTypes.string.isRequired,to:r.PropTypes.string.isRequired,params:r.PropTypes.object,query:r.PropTypes.object,onClick:r.PropTypes.func},getDefaultProps:function(){return{activeClassName:"active"}},handleClick:function(e){var t=true;var n;if(this.props.onClick)n=this.props.onClick(e);if(a(e)||!u(e))return;if(n===false||e.defaultPrevented===true)t=false;e.preventDefault();if(t)this.transitionTo(this.props.to,this.props.params,this.props.query)},getHref:function(){return this.makeHref(this.props.to,this.props.params,this.props.query)},getClassName:function(){var e=this.props.className||"";if(this.isActive(this.props.to,this.props.params,this.props.query))e+=" "+this.props.activeClassName;return e},render:function(){var e=i(this.props,{href:this.getHref(),className:this.getClassName(),onClick:this.handleClick});return r.DOM.a(e,this.props.children)}});t.exports=f},{"../mixins/ActiveState":16,"../mixins/Navigation":19,"react/lib/merge":45}],6:[function(e,t,n){function s(e){return i(r(e,{path:null,catchAll:true}))}var r=e("react/lib/merge");var i=e("./Route");t.exports=s},{"./Route":8,"react/lib/merge":45}],7:[function(e,t,n){function s(e){return r.createClass({statics:{willTransitionTo:function(t,n,r){t.redirect(e,n,r)}},render:function(){return null}})}function o(e){return i({name:e.name,path:e.from||e.path||"*",handler:s(e.to)})}var r=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var i=e("./Route");t.exports=o},{"./Route":8}],8:[function(e,t,n){var r=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var i=e("../utils/withoutProperties");var s={handler:true,path:true,defaultRoute:true,notFoundRoute:true,paramNames:true,children:true};var o=r.createClass({displayName:"Route",statics:{getUnreservedProps:function(e){return i(e,s)}},propTypes:{handler:r.PropTypes.any.isRequired,path:r.PropTypes.string,name:r.PropTypes.string},render:function(){throw new Error("The <Route> component should not be rendered directly. You may be "+"missing a <Routes> wrapper around your list of routes.")}});t.exports=o},{"../utils/withoutProperties":30}],9:[function(e,t,n){function v(e,t){return{route:e,params:t}}function m(e){return e[e.length-1]}function g(e,t,n,r){var i=null,s,o;for(var u=0,a=t.length;u<a;++u){s=t[u];i=g(e,s.props.children,s.props.defaultRoute,s.props.notFoundRoute);if(i!=null){var f=m(i).params;o=s.props.paramNames.reduce(function(e,t){e[t]=f[t];return e},{});i.unshift(v(s,o));return i}o=p.extractParams(s.props.path,e);if(o)return[v(s,o)]}if(n&&(o=p.extractParams(n.props.path,e)))return[v(n,o)];if(r&&(o=p.extractParams(r.props.path,e)))return[v(r,o)];return i}function y(e,t){return e.some(function(e){if(e.route!==t.route)return false;for(var n in e.params)if(e.params[n]!==t.params[n])return false;return true})}function b(e,t){var n=0,r;while(r=t.__activeRoute__){e[n++].component=r;t=r.refs}}function w(e,t,n){if(e.state.path===t.path)return n();var r=e.state.matches;var s=e.match(t.path);i(s,'No route matches path "'+t.path+'". Make sure you have '+'<Route path="'+t.path+'"> somewhere in your routes');if(!s)s=[];var o,u;if(r.length){b(r,e.refs);o=r.filter(function(e){return!y(s,e)});u=s.filter(function(e){return!y(r,e)})}else{o=[];u=s}var a=p.extractQuery(t.path)||{};E(o,t,function(e){if(e||t.isAborted)return n(e);S(u,t,a,function(e){if(e||t.isAborted)return n(e);var i=r.slice(0,r.length-o.length).concat(u);var s=m(i);var f=s&&s.params||{};var l=i.map(function(e){return e.route});n(null,{path:t.path,matches:i,activeRoutes:l,activeParams:f,activeQuery:a})})})}function E(e,t,n){var r=l(e).map(function(e){return function(){var n=e.route.props.handler;if(!t.isAborted&&n.willTransitionFrom)return n.willTransitionFrom(t,e.component);var r=t.promise;delete t.promise;return r}});x(r,n)}function S(e,t,n,r){var i=e.map(function(e){return function(){var r=e.route.props.handler;if(!t.isAborted&&r.willTransitionTo)r.willTransitionTo(t,e.params,n);var i=t.promise;delete t.promise;return i}});x(i,r)}function x(e,t){try{var n=e.reduce(function(e,t){return e?e.then(t):t()},null)}catch(r){return t(r)}if(n){n.then(function(){setTimeout(t)},function(e){setTimeout(function(){t(e)})})}else{t()}}function T(){return null}function N(e,t){var n=T;var r={ref:null,params:null,query:null,activeRouteHandler:n,key:null};l(e).forEach(function(e){var i=e.route;r=d.getUnreservedProps(i.props);r.ref="__activeRoute__";r.params=e.params;r.query=t;r.activeRouteHandler=n;if(i.props.addHandlerKey)r.key=p.injectParams(i.props.path,e.params);n=function(e,t){if(arguments.length>2&&typeof arguments[2]!=="undefined")throw new Error("Passing children to a route handler is not supported");return i.props.handler(u(e,t))}.bind(this,r)});return r}var r=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var i=e("react/lib/warning");var s=e("react/lib/invariant");var o=e("react/lib/ExecutionEnvironment").canUseDOM;var u=e("react/lib/copyProperties");var a=e("../stores/PathStore");var f=e("../locations/HashLocation");var l=e("../utils/reversedArray");var c=e("../utils/Transition");var h=e("../utils/Redirect");var p=e("../utils/Path");var d=e("./Route");var C={handleTransitionError:function(e,t){throw t},handleAbortedTransition:function(e,t){var n=t.abortReason;if(n instanceof h){e.replaceWith(n.to,n.params,n.query)}else{e.goBack()}}};var k={handleTransitionError:function(e,t){},handleAbortedTransition:function(e,t){}};var L=o?C:k;var A=e("../mixins/ActiveContext");var O=e("../mixins/LocationContext");var M=e("../mixins/RouteContext");var _=e("../mixins/ScrollContext");var D=r.createClass({displayName:"Routes",mixins:[A,O,M,_],propTypes:{initialPath:r.PropTypes.string,onChange:r.PropTypes.func},getInitialState:function(){return{matches:[]}},componentWillMount:function(){this.handlePathChange(this.props.initialPath)},componentDidMount:function(){a.addChangeListener(this.handlePathChange)},componentWillUnmount:function(){a.removeChangeListener(this.handlePathChange)},handlePathChange:function(e){var t=e||a.getCurrentPath();var n=a.getCurrentActionType();if(this.state.path===t)return;if(this.state.path)this.recordScroll(this.state.path);var r=this;this.dispatch(t,function(e,i){if(e){L.handleTransitionError(r,e)}else if(i.isAborted){L.handleAbortedTransition(r,i)}else{r.updateScroll(t,n);if(r.props.onChange)r.props.onChange.call(r)}})},match:function(e){return g(p.withoutQuery(e),this.getRoutes(),this.props.defaultRoute,this.props.notFoundRoute)},dispatch:function(e,t){var n=new c(this,e);var r=this;w(this,n,function(e,i){if(e||i==null)return t(e,n);r.setState(i,function(){t(null,n)})})},getHandlerProps:function(){return N(this.state.matches,this.state.activeQuery)},getActiveComponent:function(){return this.refs.__activeRoute__},getCurrentPath:function(){return this.state.path},makePath:function(e,t,n){var r;if(p.isAbsolute(e)){r=p.normalize(e)}else{var i=this.getNamedRoutes();var o=i[e];s(o,'Unable to find a route named "'+e+'". Make sure you have '+'a <Route name="'+e+'"> defined somewhere in your <Routes>');r=o.props.path}return p.withQuery(p.injectParams(r,t),n)},makeHref:function(e,t,n){var r=this.makePath(e,t,n);if(this.getLocation()===f)return"#"+r;return r},transitionTo:function(e,t,n){var r=this.getLocation();s(r,"You cannot use transitionTo without a location");r.push(this.makePath(e,t,n))},replaceWith:function(e,t,n){var r=this.getLocation();s(r,"You cannot use replaceWith without a location");r.replace(this.makePath(e,t,n))},goBack:function(){var e=this.getLocation();s(e,"You cannot use goBack without a location");e.pop()},render:function(){var e=this.state.matches[0];if(e==null)return null;return e.route.props.handler(this.getHandlerProps())},childContextTypes:{currentPath:r.PropTypes.string,makePath:r.PropTypes.func.isRequired,makeHref:r.PropTypes.func.isRequired,transitionTo:r.PropTypes.func.isRequired,replaceWith:r.PropTypes.func.isRequired,goBack:r.PropTypes.func.isRequired},getChildContext:function(){return{currentPath:this.getCurrentPath(),makePath:this.makePath,makeHref:this.makeHref,transitionTo:this.transitionTo,replaceWith:this.replaceWith,goBack:this.goBack}}});t.exports=D},{"../locations/HashLocation":12,"../mixins/ActiveContext":15,"../mixins/LocationContext":18,"../mixins/RouteContext":20,"../mixins/ScrollContext":21,"../stores/PathStore":22,"../utils/Path":23,"../utils/Redirect":25,"../utils/Transition":26,"../utils/reversedArray":28,"./Route":8,"react/lib/ExecutionEnvironment":40,"react/lib/copyProperties":41,"react/lib/invariant":43,"react/lib/warning":49}],10:[function(e,t,n){var r=e("react/lib/copyProperties");var i=e("flux").Dispatcher;var s=r(new i,{handleViewAction:function(e){this.dispatch({source:"VIEW_ACTION",action:e})}});t.exports=s},{flux:32,"react/lib/copyProperties":41}],11:[function(e,t,n){n.DefaultRoute=e("./components/DefaultRoute");n.Link=e("./components/Link");n.NotFoundRoute=e("./components/NotFoundRoute");n.Redirect=e("./components/Redirect");n.Route=e("./components/Route");n.Routes=e("./components/Routes");n.ActiveState=e("./mixins/ActiveState");n.CurrentPath=e("./mixins/CurrentPath");n.Navigation=e("./mixins/Navigation")},{"./components/DefaultRoute":4,"./components/Link":5,"./components/NotFoundRoute":6,"./components/Redirect":7,"./components/Route":8,"./components/Routes":9,"./mixins/ActiveState":16,"./mixins/CurrentPath":17,"./mixins/Navigation":19}],12:[function(e,t,n){function a(){return window.location.hash.substr(1)}function l(){var e=a();if(e.charAt(0)==="/")return true;p.replace("/"+e);return false}function c(){if(l()){var e=a();o.handleViewAction({type:f||s.POP,path:a()});f=null}}var r=e("react/lib/invariant");var i=e("react/lib/ExecutionEnvironment").canUseDOM;var s=e("../actions/LocationActions");var o=e("../dispatchers/LocationDispatcher");var u=e("../utils/getWindowPath");var f;var h=false;var p={setup:function(){if(h)return;r(i,"You cannot use HashLocation in an environment with no DOM");l();o.handleViewAction({type:s.SETUP,path:a()});if(window.addEventListener){window.addEventListener("hashchange",c,false)}else{window.attachEvent("onhashchange",c)}h=true},teardown:function(){if(window.removeEventListener){window.removeEventListener("hashchange",c,false)}else{window.detachEvent("onhashchange",c)}h=false},push:function(e){f=s.PUSH;window.location.hash=e},replace:function(e){f=s.REPLACE;window.location.replace(u()+"#"+e)},pop:function(){f=s.POP;window.history.back()},toString:function(){return"<HashLocation>"}};t.exports=p},{"../actions/LocationActions":1,"../dispatchers/LocationDispatcher":10,"../utils/getWindowPath":27,"react/lib/ExecutionEnvironment":40,"react/lib/invariant":43}],13:[function(e,t,n){function a(){o.handleViewAction({type:s.POP,path:u()})}var r=e("react/lib/invariant");var i=e("react/lib/ExecutionEnvironment").canUseDOM;var s=e("../actions/LocationActions");var o=e("../dispatchers/LocationDispatcher");var u=e("../utils/getWindowPath");var f=false;var l={setup:function(){if(f)return;r(i,"You cannot use HistoryLocation in an environment with no DOM");o.handleViewAction({type:s.SETUP,path:u()});if(window.addEventListener){window.addEventListener("popstate",a,false)}else{window.attachEvent("popstate",a)}f=true},teardown:function(){if(window.removeEventListener){window.removeEventListener("popstate",a,false)}else{window.detachEvent("popstate",a)}f=false},push:function(e){window.history.pushState({path:e},"",e);o.handleViewAction({type:s.PUSH,path:u()})},replace:function(e){window.history.replaceState({path:e},"",e);o.handleViewAction({type:s.REPLACE,path:u()})},pop:function(){window.history.back()},toString:function(){return"<HistoryLocation>"}};t.exports=l},{"../actions/LocationActions":1,"../dispatchers/LocationDispatcher":10,"../utils/getWindowPath":27,"react/lib/ExecutionEnvironment":40,"react/lib/invariant":43}],14:[function(e,t,n){var r=e("react/lib/invariant");var i=e("react/lib/ExecutionEnvironment").canUseDOM;var s=e("../actions/LocationActions");var o=e("../dispatchers/LocationDispatcher");var u=e("../utils/getWindowPath");var a={setup:function(){r(i,"You cannot use RefreshLocation in an environment with no DOM");o.handleViewAction({type:s.SETUP,path:u()})},push:function(e){window.location=e},replace:function(e){window.location.replace(e)},pop:function(){window.history.back()},toString:function(){return"<RefreshLocation>"}};t.exports=a},{"../actions/LocationActions":1,"../dispatchers/LocationDispatcher":10,"../utils/getWindowPath":27,"react/lib/ExecutionEnvironment":40,"react/lib/invariant":43}],15:[function(e,t,n){function s(e,t){return e.some(function(e){return e.props.name===t})}function o(e,t){for(var n in t)if(String(e[n])!==String(t[n]))return false;return true}function u(e,t){for(var n in t)if(String(e[n])!==String(t[n]))return false;return true}var r=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var i=e("react/lib/copyProperties");var a={propTypes:{initialActiveState:r.PropTypes.object},getDefaultProps:function(){return{initialActiveState:{}}},getInitialState:function(){var e=this.props.initialActiveState;return{activeRoutes:e.activeRoutes||[],activeParams:e.activeParams||{},activeQuery:e.activeQuery||{}}},getActiveRoutes:function(){return this.state.activeRoutes.slice(0)},getActiveParams:function(){return i({},this.state.activeParams)},getActiveQuery:function(){return i({},this.state.activeQuery)},isActive:function(e,t,n){var r=s(this.state.activeRoutes,e)&&o(this.state.activeParams,t);if(n)return r&&u(this.state.activeQuery,n);return r},childContextTypes:{activeRoutes:r.PropTypes.array.isRequired,activeParams:r.PropTypes.object.isRequired,activeQuery:r.PropTypes.object.isRequired,isActive:r.PropTypes.func.isRequired},getChildContext:function(){return{activeRoutes:this.getActiveRoutes(),activeParams:this.getActiveParams(),activeQuery:this.getActiveQuery(),isActive:this.isActive}}};t.exports=a},{"react/lib/copyProperties":41}],16:[function(e,t,n){var r=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var i={contextTypes:{activeRoutes:r.PropTypes.array.isRequired,activeParams:r.PropTypes.object.isRequired,activeQuery:r.PropTypes.object.isRequired,isActive:r.PropTypes.func.isRequired},getActiveRoutes:function(){return this.context.activeRoutes},getActiveParams:function(){return this.context.activeParams},getActiveQuery:function(){return this.context.activeQuery},isActive:function(e,t,n){return this.context.isActive(e,t,n)}};t.exports=i},{}],17:[function(e,t,n){var r=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var i={contextTypes:{currentPath:r.PropTypes.string.isRequired},getCurrentPath:function(){return this.context.currentPath}};t.exports=i},{}],18:[function(e,t,n){var r=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var i=e("react/lib/invariant");var s=e("react/lib/ExecutionEnvironment").canUseDOM;var o=e("../locations/HashLocation");var u=e("../locations/HistoryLocation");var a=e("../locations/RefreshLocation");var f=e("../utils/supportsHistory");var l={none:null,hash:o,history:u,refresh:a};var c={propTypes:{location:function(e,t,n){var r=e[t];if(typeof r==="string"&&!(r in l))return new Error('Unknown location "'+r+'", see '+n)}},getDefaultProps:function(){return{location:s?o:null}},getInitialState:function(){var e=this.props.location;if(typeof e==="string")e=l[e];if(e===u&&!f())e=a;return{location:e}},componentWillMount:function(){var e=this.getLocation();i(e==null||s,"Cannot use location without a DOM");if(e&&e.setup)e.setup()},getLocation:function(){return this.state.location},childContextTypes:{location:r.PropTypes.object},getChildContext:function(){return{location:this.getLocation()}}};t.exports=c},{"../locations/HashLocation":12,"../locations/HistoryLocation":13,"../locations/RefreshLocation":14,"../utils/supportsHistory":29,"react/lib/ExecutionEnvironment":40,"react/lib/invariant":43}],19:[function(e,t,n){var r=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var i={contextTypes:{makePath:r.PropTypes.func.isRequired,makeHref:r.PropTypes.func.isRequired,transitionTo:r.PropTypes.func.isRequired,replaceWith:r.PropTypes.func.isRequired,goBack:r.PropTypes.func.isRequired},makePath:function(e,t,n){return this.context.makePath(e,t,n)},makeHref:function(e,t,n){return this.context.makeHref(e,t,n)},transitionTo:function(e,t,n){this.context.transitionTo(e,t,n)},replaceWith:function(e,t,n){this.context.replaceWith(e,t,n)},goBack:function(){this.context.goBack()}};t.exports=i},{}],20:[function(e,t,n){function o(e,t,n){var o=e.props;i(r.isValidClass(o.handler),'The handler for the "%s" route must be a valid React class',o.name||o.path);var a=t&&t.props.path||"/";if((o.path||o.name)&&!o.isDefault&&!o.catchAll){var f=o.path||o.name;if(!s.isAbsolute(f))f=s.join(a,f);o.path=s.normalize(f)}else{o.path=a;if(o.catchAll)o.path+="*"}o.paramNames=s.extractParamNames(o.path);if(t&&Array.isArray(t.props.paramNames)){t.props.paramNames.forEach(function(e){i(o.paramNames.indexOf(e)!==-1,'The nested route path "%s" is missing the "%s" parameter of its parent path "%s"',o.path,e,t.props.path)})}if(o.name){var l=n[o.name];i(!l||e===l,'You cannot use the name "%s" for more than one route',o.name);n[o.name]=e}if(o.catchAll){i(t,"<NotFoundRoute> must have a parent <Route>");i(t.props.notFoundRoute==null,"You may not have more than one <NotFoundRoute> per <Route>");t.props.notFoundRoute=e;return null}if(o.isDefault){i(t,"<DefaultRoute> must have a parent <Route>");i(t.props.defaultRoute==null,"You may not have more than one <DefaultRoute> per <Route>");t.props.defaultRoute=e;return null}o.children=u(o.children,e,n);return e}function u(e,t,n){var i=[];r.Children.forEach(e,function(e){if(e=o(e,t,n))i.push(e)});return i}var r=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var i=e("react/lib/invariant");var s=e("../utils/Path");var a={getInitialState:function(){var e={};return{routes:u(this.props.children,this,e),namedRoutes:e}},getRoutes:function(){return this.state.routes},getNamedRoutes:function(){return this.state.namedRoutes},getRouteByName:function(e){return this.state.namedRoutes[e]||null},childContextTypes:{routes:r.PropTypes.array.isRequired,namedRoutes:r.PropTypes.object.isRequired},getChildContext:function(){return{routes:this.getRoutes(),namedRoutes:this.getNamedRoutes()}}};t.exports=a},{"../utils/Path":23,"react/lib/invariant":43}],21:[function(e,t,n){function a(){i(s,"Cannot get current scroll position without a DOM");return{x:window.scrollX,y:window.scrollY}}var r=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var i=e("react/lib/invariant");var s=e("react/lib/ExecutionEnvironment").canUseDOM;var o=e("../behaviors/ImitateBrowserBehavior");var u=e("../behaviors/ScrollToTopBehavior");var f={none:null,browser:o,imitateBrowser:o,scrollToTop:u};var l={propTypes:{scrollBehavior:function(e,t,n){var r=e[t];if(typeof r==="string"&&!(r in f))return new Error('Unknown scroll behavior "'+r+'", see '+n)}},getDefaultProps:function(){return{scrollBehavior:s?o:null}},getInitialState:function(){var e=this.props.scrollBehavior;if(typeof e==="string")e=f[e];return{scrollBehavior:e}},componentWillMount:function(){var e=this.getScrollBehavior();i(e==null||s,"Cannot use scroll behavior without a DOM");if(e!=null)this._scrollPositions={}},recordScroll:function(e){if(this._scrollPositions)this._scrollPositions[e]=a()},updateScroll:function(e,t){var n=this.getScrollBehavior();var r=this._scrollPositions[e];if(n&&r)n.updateScrollPosition(r,t)},getScrollBehavior:function(){return this.state.scrollBehavior},childContextTypes:{scrollBehavior:r.PropTypes.object},getChildContext:function(){return{scrollBehavior:this.getScrollBehavior()}}};t.exports=l},{"../behaviors/ImitateBrowserBehavior":2,"../behaviors/ScrollToTopBehavior":3,"react/lib/ExecutionEnvironment":40,"react/lib/invariant":43}],22:[function(e,t,n){function a(){u.emit(o)}var r=e("events").EventEmitter;var i=e("../actions/LocationActions");var s=e("../dispatchers/LocationDispatcher");var o="change";var u=new r;var f,l;var c={addChangeListener:function(e){u.addListener(o,e)},removeChangeListener:function(e){u.removeListener(o,e)},removeAllChangeListeners:function(){u.removeAllListeners(o)},getCurrentPath:function(){return f},getCurrentActionType:function(){return l},dispatchToken:s.register(function(e){var t=e.action;switch(t.type){case i.SETUP:case i.PUSH:case i.REPLACE:case i.POP:if(f!==t.path){f=t.path;l=t.type;a()}break}})};t.exports=c},{"../actions/LocationActions":1,"../dispatchers/LocationDispatcher":10,events:31}],23:[function(e,t,n){function o(e){return encodeURIComponent(e).replace(/%20/g,"+")}function u(e){return decodeURIComponent(e.replace(/\+/g," "))}function a(e){return String(e).split("/").map(o).join("/")}function h(e){if(!(e in c)){var t=[];var n=e.replace(f,function(e,n){if(n){t.push(n);return"([^/?#]+)"}else if(e==="*"){t.push("splat");return"(.*?)"}else{return"\\"+e}});c[e]={matcher:new RegExp("^"+n+"$","i"),paramNames:t}}return c[e]}var r=e("react/lib/invariant");var i=e("qs/lib/utils").merge;var s=e("qs");var f=/:([a-zA-Z_$][a-zA-Z0-9_$]*)|[*.()\[\]\\+|{}^$]/g;var l=/\?(.+)/;var c={};var p={extractParamNames:function(e){return h(e).paramNames},extractParams:function(e,t){var n=h(e);var r=u(t).match(n.matcher);if(!r)return null;var i={};n.paramNames.forEach(function(e,t){i[e]=r[t+1]});return i},injectParams:function(e,t){t=t||{};var n=0;return e.replace(f,function(i,s){s=s||"splat";r(t[s]!=null,'Missing "'+s+'" parameter for path "'+e+'"');var o;if(s==="splat"&&Array.isArray(t[s])){o=t[s][n++];r(o!=null,"Missing splat # "+n+' for path "'+e+'"')}else{o=t[s]}return a(o)})},extractQuery:function(e){var t=u(e).match(l);return t&&s.parse(t[1])},withoutQuery:function(e){return e.replace(l,"")},withQuery:function(e,t){var n=p.extractQuery(e);if(n)t=t?i(n,t):n;var r=t&&s.stringify(t);if(r)return p.withoutQuery(e)+"?"+r;return e},isAbsolute:function(e){return e.charAt(0)==="/"},normalize:function(e,t){return e.replace(/^\/*/,"/")},join:function(e,t){return e.replace(/\/*$/,"/")+t}};t.exports=p},{qs:35,"qs/lib/utils":39,"react/lib/invariant":43}],24:[function(e,t,n){var r=e("when/lib/Promise");t.exports=r},{"when/lib/Promise":50}],25:[function(e,t,n){function r(e,t,n){this.to=e;this.params=t;this.query=n}t.exports=r},{}],26:[function(e,t,n){function o(e,t){this.routesComponent=e;this.path=t;this.abortReason=null;this.isAborted=false}var r=e("react/lib/mixInto");var i=e("./Promise");var s=e("./Redirect");r(o,{abort:function(e){this.abortReason=e;this.isAborted=true},redirect:function(e,t,n){this.abort(new s(e,t,n))},wait:function(e){this.promise=i.resolve(e)},retry:function(){this.routesComponent.replaceWith(this.path)}});t.exports=o},{"./Promise":24,"./Redirect":25,"react/lib/mixInto":48}],27:[function(e,t,n){function r(){return window.location.pathname+window.location.search}t.exports=r},{}],28:[function(e,t,n){function r(e){return e.slice(0).reverse()}t.exports=r},{}],29:[function(e,t,n){function r(){var e=navigator.userAgent;if((e.indexOf("Android 2.")!==-1||e.indexOf("Android 4.0")!==-1)&&e.indexOf("Mobile Safari")!==-1&&e.indexOf("Chrome")===-1){return false}return window.history&&"pushState"in window.history}t.exports=r},{}],30:[function(e,t,n){function r(e,t){var n={};for(var r in e){if(e.hasOwnProperty(r)&&!t[r])n[r]=e[r]}return n}t.exports=r},{}],31:[function(e,t,n){function r(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}function i(e){return typeof e==="function"}function s(e){return typeof e==="number"}function o(e){return typeof e==="object"&&e!==null}function u(e){return e===void 0}t.exports=r;r.EventEmitter=r;r.prototype._events=undefined;r.prototype._maxListeners=undefined;r.defaultMaxListeners=10;r.prototype.setMaxListeners=function(e){if(!s(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");this._maxListeners=e;return this};r.prototype.emit=function(e){var t,n,r,s,a,f;if(!this._events)this._events={};if(e==="error"){if(!this._events.error||o(this._events.error)&&!this._events.error.length){t=arguments[1];if(t instanceof Error){throw t}else{throw TypeError('Uncaught, unspecified "error" event.')}return false}}n=this._events[e];if(u(n))return false;if(i(n)){switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:r=arguments.length;s=new Array(r-1);for(a=1;a<r;a++)s[a-1]=arguments[a];n.apply(this,s)}}else if(o(n)){r=arguments.length;s=new Array(r-1);for(a=1;a<r;a++)s[a-1]=arguments[a];f=n.slice();r=f.length;for(a=0;a<r;a++)f[a].apply(this,s)}return true};r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",e,i(t.listener)?t.listener:t);if(!this._events[e])this._events[e]=t;else if(o(this._events[e]))this._events[e].push(t);else this._events[e]=[this._events[e],t];if(o(this._events[e])&&!this._events[e].warned){var n;if(!u(this._maxListeners)){n=this._maxListeners}else{n=r.defaultMaxListeners}if(n&&n>0&&this._events[e].length>n){this._events[e].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[e].length);if(typeof console.trace==="function"){console.trace()}}}return this};r.prototype.on=r.prototype.addListener;r.prototype.once=function(e,t){function r(){this.removeListener(e,r);if(!n){n=true;t.apply(this,arguments)}}if(!i(t))throw TypeError("listener must be a function");var n=false;r.listener=t;this.on(e,r);return this};r.prototype.removeListener=function(e,t){var n,r,s,u;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;n=this._events[e];s=n.length;r=-1;if(n===t||i(n.listener)&&n.listener===t){delete this._events[e];if(this._events.removeListener)this.emit("removeListener",e,t)}else if(o(n)){for(u=s;u-->0;){if(n[u]===t||n[u].listener&&n[u].listener===t){r=u;break}}if(r<0)return this;if(n.length===1){n.length=0;delete this._events[e]}else{n.splice(r,1)}if(this._events.removeListener)this.emit("removeListener",e,t)}return this};r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[e])delete this._events[e];return this}if(arguments.length===0){for(t in this._events){if(t==="removeListener")continue;this.removeAllListeners(t)}this.removeAllListeners("removeListener");this._events={};return this}n=this._events[e];if(i(n)){this.removeListener(e,n)}else{while(n.length)this.removeListener(e,n[n.length-1])}delete this._events[e];return this};r.prototype.listeners=function(e){var t;if(!this._events||!this._events[e])t=[];else if(i(this._events[e]))t=[this._events[e]];else t=this._events[e].slice();return t};r.listenerCount=function(e,t){var n;if(!e._events||!e._events[t])n=0;else if(i(e._events[t]))n=1;else n=e._events[t].length;return n}},{}],32:[function(e,t,n){t.exports.Dispatcher=e("./lib/Dispatcher")},{"./lib/Dispatcher":33}],33:[function(e,t,n){"use strict";function o(){this.$Dispatcher_callbacks={};this.$Dispatcher_isPending={};this.$Dispatcher_isHandled={};this.$Dispatcher_isDispatching=false;this.$Dispatcher_pendingPayload=null}var r=e("./invariant");var i=1;var s="ID_";o.prototype.register=function(e){var t=s+i++;this.$Dispatcher_callbacks[t]=e;return t};o.prototype.unregister=function(e){r(this.$Dispatcher_callbacks[e],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",e);delete this.$Dispatcher_callbacks[e]};o.prototype.waitFor=function(e){r(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var t=0;t<e.length;t++){var n=e[t];if(this.$Dispatcher_isPending[n]){r(this.$Dispatcher_isHandled[n],"Dispatcher.waitFor(...): Circular dependency detected while "+"waiting for `%s`.",n);continue}r(this.$Dispatcher_callbacks[n],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",n);this.$Dispatcher_invokeCallback(n)}};o.prototype.dispatch=function(e){r(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch.");this.$Dispatcher_startDispatching(e);try{for(var t in this.$Dispatcher_callbacks){if(this.$Dispatcher_isPending[t]){continue}this.$Dispatcher_invokeCallback(t)}}finally{this.$Dispatcher_stopDispatching()}};o.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching};o.prototype.$Dispatcher_invokeCallback=function(e){this.$Dispatcher_isPending[e]=true;this.$Dispatcher_callbacks[e](this.$Dispatcher_pendingPayload);this.$Dispatcher_isHandled[e]=true};o.prototype.$Dispatcher_startDispatching=function(e){for(var t in this.$Dispatcher_callbacks){this.$Dispatcher_isPending[t]=false;this.$Dispatcher_isHandled[t]=false}this.$Dispatcher_pendingPayload=e;this.$Dispatcher_isDispatching=true};o.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null;this.$Dispatcher_isDispatching=false};t.exports=o},{"./invariant":34}],34:[function(e,t,n){"use strict";var r=function(e,t,n,r,i,s,o,u){if(false){if(t===undefined){throw new Error("invariant requires an error message argument")}}if(!e){var a;if(t===undefined){a=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var f=[n,r,i,s,o,u];var l=0;a=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return f[l++]}))}a.framesToPop=1;throw a}};t.exports=r},{}],35:[function(e,t,n){t.exports=e("./lib")},{"./lib":36}],36:[function(e,t,n){var r=e("./stringify");var i=e("./parse");var s={};t.exports={stringify:r,parse:i}},{"./parse":37,"./stringify":38}],37:[function(e,t,n){var r=e("./utils");var i={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3};i.parseValues=function(e,t){var n={};var i=e.split(t.delimiter,t.parameterLimit===Infinity?undefined:t.parameterLimit);for(var s=0,o=i.length;s<o;++s){var u=i[s];var a=u.indexOf("]=")===-1?u.indexOf("="):u.indexOf("]=")+1;if(a===-1){n[r.decode(u)]=""}else{var f=r.decode(u.slice(0,a));var l=r.decode(u.slice(a+1));if(!n[f]){n[f]=l}else{n[f]=[].concat(n[f]).concat(l)}}}return n};i.parseObject=function(e,t,n){if(!e.length){return t}var r=e.shift();var s={};if(r==="[]"){s=[];s=s.concat(i.parseObject(e,t,n))}else{var o=r[0]==="["&&r[r.length-1]==="]"?r.slice(1,r.length-1):r;var u=parseInt(o,10);if(!isNaN(u)&&r!==o&&u<=n.arrayLimit){s=[];s[u]=i.parseObject(e,t,n)}else{s[o]=i.parseObject(e,t,n)}}return s};i.parseKeys=function(e,t,n){if(!e){return}var r=/^([^\[\]]*)/;var s=/(\[[^\[\]]*\])/g;var o=r.exec(e);if(Object.prototype.hasOwnProperty(o[1])){return}var u=[];if(o[1]){u.push(o[1])}var a=0;while((o=s.exec(e))!==null&&a<n.depth){++a;if(!Object.prototype.hasOwnProperty(o[1].replace(/\[|\]/g,""))){u.push(o[1])}}if(o){u.push("["+e.slice(o.index)+"]")}return i.parseObject(u,t,n)};t.exports=function(e,t){if(e===""||e===null||typeof e==="undefined"){return{}}t=t||{};t.delimiter=typeof t.delimiter==="string"||r.isRegExp(t.delimiter)?t.delimiter:i.delimiter;t.depth=typeof t.depth==="number"?t.depth:i.depth;t.arrayLimit=typeof t.arrayLimit==="number"?t.arrayLimit:i.arrayLimit;t.parameterLimit=typeof t.parameterLimit==="number"?t.parameterLimit:i.parameterLimit;var n=typeof e==="string"?i.parseValues(e,t):e;var s={};var o=Object.keys(n);for(var u=0,a=o.length;u<a;++u){var f=o[u];var l=i.parseKeys(f,n[f],t);s=r.merge(s,l)}return r.compact(s)}},{"./utils":39}],38:[function(e,t,n){var r=e("./utils");var i={delimiter:"&"};i.stringify=function(e,t){if(r.isBuffer(e)){e=e.toString()}else if(e instanceof Date){e=e.toISOString()}else if(e===null){e=""}if(typeof e==="string"||typeof e==="number"||typeof e==="boolean"){return[encodeURIComponent(t)+"="+encodeURIComponent(e)]}var n=[];for(var s in e){if(e.hasOwnProperty(s)){n=n.concat(i.stringify(e[s],t+"["+s+"]"))}}return n};t.exports=function(e,t){t=t||{};var n=typeof t.delimiter==="undefined"?i.delimiter:t.delimiter;var r=[];for(var s in e){if(e.hasOwnProperty(s)){r=r.concat(i.stringify(e[s],s))}}return r.join(n)}},{"./utils":39}],39:[function(e,t,n){var r={};n.arrayToObject=function(e){var t={};for(var n=0,r=e.length;n<r;++n){if(typeof e[n]!=="undefined"){t[n]=e[n]}}return t};n.merge=function(e,t){if(!t){return e}if(Array.isArray(t)){for(var r=0,i=t.length;r<i;++r){if(typeof t[r]!=="undefined"){if(typeof e[r]==="object"){e[r]=n.merge(e[r],t[r])}else{e[r]=t[r]}}}return e}if(Array.isArray(e)){if(typeof t!=="object"){e.push(t);return e}else{e=n.arrayToObject(e)}}var s=Object.keys(t);for(var o=0,u=s.length;o<u;++o){var a=s[o];var f=t[a];if(f&&typeof f==="object"){if(!e[a]){e[a]=f}else{e[a]=n.merge(e[a],f)}}else{e[a]=f}}return e};n.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}};n.compact=function(e,t){if(typeof e!=="object"||e===null){return e}t=t||[];var r=t.indexOf(e);if(r!==-1){return t[r]}t.push(e);if(Array.isArray(e)){var i=[];for(var s=0,o=e.length;s<o;++s){if(typeof e[s]!=="undefined"){i.push(e[s])}}return i}var u=Object.keys(e);for(var s=0,a=u.length;s<a;++s){var f=u[s];e[f]=n.compact(e[f],t)}return e};n.isRegExp=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"};n.isBuffer=function(e){if(typeof Buffer!=="undefined"){return Buffer.isBuffer(e)}else{return false}}},{}],40:[function(e,t,n){"use strict";var r=!!(typeof window!=="undefined"&&window.document&&window.document.createElement);var i={canUseDOM:r,canUseWorkers:typeof Worker!=="undefined",canUseEventListeners:r&&!!(window.addEventListener||window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=i},{}],41:[function(e,t,n){function r(e,t,n,r,i,s,o){e=e||{};if("production"!=="production"){if(o){throw new Error("Too many arguments passed to copyProperties")}}var u=[t,n,r,i,s];var a=0,f;while(u[a]){f=u[a++];for(var l in f){e[l]=f[l]}if(f.hasOwnProperty&&f.hasOwnProperty("toString")&&typeof f.toString!="undefined"&&e.toString!==f.toString){e.toString=f.toString}}return e}t.exports=r},{}],42:[function(e,t,n){function i(e){return function(){return e}}function s(){}var r=e("./copyProperties");r(s,{thatReturns:i,thatReturnsFalse:i(false),thatReturnsTrue:i(true),thatReturnsNull:i(null),thatReturnsThis:function(){return this},thatReturnsArgument:function(e){return e}});t.exports=s},{"./copyProperties":41}],43:[function(e,t,n){"use strict";var r=function(e,t,n,r,i,s,o,u){if("production"!=="production"){if(t===undefined){throw new Error("invariant requires an error message argument")}}if(!e){var a;if(t===undefined){a=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var f=[n,r,i,s,o,u];var l=0;a=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return f[l++]}))}a.framesToPop=1;throw a}};t.exports=r},{}],44:[function(e,t,n){"use strict";var r=e("./invariant");var i=function(e){var t={};var n;"production"!=="production"?r(e instanceof Object&&!Array.isArray(e),"keyMirror(...): Argument must be an object."):r(e instanceof Object&&!Array.isArray(e));for(n in e){if(!e.hasOwnProperty(n)){continue}t[n]=n}return t};t.exports=i},{"./invariant":43}],45:[function(e,t,n){"use strict";var r=e("./mergeInto");var i=function(e,t){var n={};r(n,e);r(n,t);return n};t.exports=i},{"./mergeInto":47}],46:[function(e,t,n){"use strict";var r=e("./invariant");var i=e("./keyMirror");var s=36;var o=function(e){return typeof e!=="object"||e===null};var u={MAX_MERGE_DEPTH:s,isTerminal:o,normalizeMergeArg:function(e){return e===undefined||e===null?{}:e},checkMergeArrayArgs:function(e,t){"production"!=="production"?r(Array.isArray(e)&&Array.isArray(t),"Tried to merge arrays, instead got %s and %s.",e,t):r(Array.isArray(e)&&Array.isArray(t))},checkMergeObjectArgs:function(e,t){u.checkMergeObjectArg(e);u.checkMergeObjectArg(t)},checkMergeObjectArg:function(e){"production"!=="production"?r(!o(e)&&!Array.isArray(e),"Tried to merge an object, instead got %s.",e):r(!o(e)&&!Array.isArray(e))},checkMergeIntoObjectArg:function(e){"production"!=="production"?r((!o(e)||typeof e==="function")&&!Array.isArray(e),"Tried to merge into an object, instead got %s.",e):r((!o(e)||typeof e==="function")&&!Array.isArray(e))},checkMergeLevel:function(e){"production"!=="production"?r(e<s,"Maximum deep merge depth exceeded. You may be attempting to merge "+"circular structures in an unsupported way."):r(e<s)},checkArrayStrategy:function(e){"production"!=="production"?r(e===undefined||e in u.ArrayStrategies,"You must provide an array strategy to deep merge functions to "+"instruct the deep merge how to resolve merging two arrays."):r(e===undefined||e in u.ArrayStrategies)},ArrayStrategies:i({Clobber:true,IndexByIndex:true})};t.exports=u},{"./invariant":43,"./keyMirror":44}],47:[function(e,t,n){"use strict";function o(e,t){s(e);if(t!=null){i(t);for(var n in t){if(!t.hasOwnProperty(n)){continue}e[n]=t[n]}}}var r=e("./mergeHelpers");var i=r.checkMergeObjectArg;var s=r.checkMergeIntoObjectArg;t.exports=o},{"./mergeHelpers":46}],48:[function(e,t,n){"use strict";var r=function(e,t){var n;for(n in t){if(!t.hasOwnProperty(n)){continue}e.prototype[n]=t[n]}};t.exports=r},{}],49:[function(e,t,n){"use strict";var r=e("./emptyFunction");var i=r;if("production"!=="production"){i=function(e,t){var n=Array.prototype.slice.call(arguments,2);if(t===undefined){throw new Error("`warning(condition, format, ...args)` requires a warning "+"message argument")}if(!e){var r=0;console.warn("Warning: "+t.replace(/%s/g,function(){return n[r++]}))}}}t.exports=i},{"./emptyFunction":42}],50:[function(t,n,r){(function(e){"use strict";e(function(e){var t=e("./makePromise");var n=e("./Scheduler");var r=e("./async");return t({scheduler:new n(r)})})})(typeof e==="function"&&e.amd?e:function(e){n.exports=e(t)})},{"./Scheduler":52,"./async":53,"./makePromise":54}],51:[function(t,n,r){(function(e){"use strict";e(function(){function e(e){this.head=this.tail=this.length=0;this.buffer=new Array(1<<e)}e.prototype.push=function(e){if(this.length===this.buffer.length){this._ensureCapacity(this.length*2)}this.buffer[this.tail]=e;this.tail=this.tail+1&this.buffer.length-1;++this.length;return this.length};e.prototype.shift=function(){var e=this.buffer[this.head];this.buffer[this.head]=void 0;this.head=this.head+1&this.buffer.length-1;--this.length;return e};e.prototype._ensureCapacity=function(e){var t=this.head;var n=this.buffer;var r=new Array(e);var i=0;var s;if(t===0){s=this.length;for(;i<s;++i){r[i]=n[i]}}else{e=n.length;s=this.tail;for(;t<e;++i,++t){r[i]=n[t]}for(t=0;t<s;++i,++t){r[i]=n[t]}}this.buffer=r;this.head=0;this.tail=this.length};return e})})(typeof e==="function"&&e.amd?e:function(e){n.exports=e()})},{}],52:[function(t,n,r){(function(e){"use strict";e(function(e){function n(e){this._async=e;this._queue=new t(15);this._afterQueue=new t(5);this._running=false;var n=this;this.drain=function(){n._drain()}}function r(e){while(e.length>0){e.shift().run()}}var t=e("./Queue");n.prototype.enqueue=function(e){this._add(this._queue,e)};n.prototype.afterQueue=function(e){this._add(this._afterQueue,e)};n.prototype._drain=function(){r(this._queue);this._running=false;r(this._afterQueue)};n.prototype._add=function(e,t){e.push(t);if(!this._running){this._running=true;this._async(this.drain)}};return n})})(typeof e==="function"&&e.amd?e:function(e){n.exports=e(t)})},{"./Queue":51}],53:[function(t,n,r){(function(e){"use strict";e(function(e){var t,n;if(typeof process!=="undefined"&&process!==null&&typeof process.nextTick==="function"){t=function(e){process.nextTick(e)}}else if(n=typeof MutationObserver==="function"&&MutationObserver||typeof WebKitMutationObserver==="function"&&WebKitMutationObserver){t=function(e,t){function s(){var e=n;n=void 0;e()}var n;var r=e.createElement("div");var i=new t(s);i.observe(r,{attributes:true});return function(e){n=e;r.setAttribute("class","x")}}(document,n)}else{t=function(e){var t;try{t=e("vertx")}catch(n){}if(t){if(typeof t.runOnLoop==="function"){return t.runOnLoop}if(typeof t.runOnContext==="function"){return t.runOnContext}}var r=setTimeout;return function(e){r(e,0)}}(e)}return t})})(typeof e==="function"&&e.amd?e:function(e){n.exports=e(t)})},{}],54:[function(t,n,r){(function(e){"use strict";e(function(){return function(t){function i(e,t){this._handler=e===m?t:s(e)}function s(e){function r(e){t.resolve(e)}function i(e){t.reject(e)}function s(e){t.notify(e)}var t=new b;try{e(r,i,s)}catch(n){i(n)}return t}function o(e){return P(e)?e:new i(m,new w(p(e)))}function u(e){return new i(m,new w(new T(e)))}function a(){return L}function f(){return new i(m,new b)}function l(e){function f(e,t,r){this[e]=t;if(--n===0){r.become(new S(this))}}var t=new b;var n=e.length>>>0;var r=new Array(n);var s,o,u,a;for(s=0;s<e.length;++s){u=e[s];if(u===void 0&&!(s in e)){--n;continue}if(H(u)){o=d(u);a=o.state();if(a===0){o.fold(f,s,r,t)}else if(a>0){r[s]=o.value;--n}else{c(e,s+1,o);t.become(o);break}}else{r[s]=u;--n}}if(n===0){t.become(new S(r))}return new i(m,t)}function c(e,t,n){var r,i,s;for(r=t;r<e.length;++r){s=e[r];if(H(s)){i=d(s);if(i!==n){i.visit(i,void 0,i._unreport)}}}}function h(e){if(Object(e)===e&&e.length===0){return a()}var t=new b;var n,r;for(n=0;n<e.length;++n){r=e[n];if(r!==void 0&&n in e){p(r).visit(t,t.resolve,t.reject)}}return new i(m,t)}function p(e){if(P(e)){return e._handler.join()}return H(e)?v(e):new S(e)}function d(e){return P(e)?e._handler.join():v(e)}function v(e){try{var t=e.then;return typeof t==="function"?new E(t,e):new S(e)}catch(n){return new T(n)}}function m(){}function g(){}function b(e,t){i.createContext(this,t);this.consumers=void 0;this.receiver=e;this.handler=void 0;this.resolved=false}function w(e){this.handler=e}function E(e,t){b.call(this);n.enqueue(new _(e,t,this))}function S(e){i.createContext(this);this.value=e}function T(e){i.createContext(this);this.id=++x;this.value=e;this.handled=false;this.reported=false;this._report()}function N(e,t){this.rejection=e;this.context=t}function C(e){this.rejection=e}function A(){return new T(new TypeError("Promise cycle"))}function O(e,t){this.continuation=e;this.handler=t}function M(e,t){this.handler=t;this.value=e}function _(e,t,n){this._then=e;this.thenable=t;this.resolver=n}function D(e,t,n,r,i){try{e.call(t,n,r,i)}catch(s){r(s)}}function P(e){return e instanceof i}function H(e){return(typeof e==="object"||typeof e==="function")&&e!==null}function B(e,t,n,r){if(typeof e!=="function"){return r.become(t)}i.enterContext(t);I(e,t.value,n,r);i.exitContext()}function j(e,t,n,r,s){if(typeof e!=="function"){return s.become(n)}i.enterContext(n);q(e,t,n.value,r,s);i.exitContext()}function F(e,t,n,r,s){if(typeof e!=="function"){return s.notify(t)}i.enterContext(n);R(e,t,r,s);i.exitContext()}function I(e,t,n,r){try{r.become(p(e.call(n,t)))}catch(i){r.become(new T(i))}}function q(e,t,n,r,i){try{e.call(r,t,n,i)}catch(s){i.become(new T(s))}}function R(e,t,n,r){try{r.notify(e.call(n,t))}catch(i){r.notify(i)}}function U(e,t){t.prototype=r(e.prototype);t.prototype.constructor=t}function z(){}var n=t.scheduler;var r=Object.create||function(e){function t(){}t.prototype=e;return new t};i.resolve=o;i.reject=u;i.never=a;i._defer=f;i._handler=p;i.prototype.then=function(e,t){var n=this._handler;var r=n.join().state();if(typeof e!=="function"&&r>0||typeof t!=="function"&&r<0){return new this.constructor(m,n)}var i=this._beget();var s=i._handler;n.chain(s,n.receiver,e,t,arguments.length>2?arguments[2]:void 0);return i};i.prototype["catch"]=function(e){return this.then(void 0,e)};i.prototype._beget=function(){var e=this._handler;var t=new b(e.receiver,e.join().context);return new this.constructor(m,t)};i.all=l;i.race=h;m.prototype.when=m.prototype.become=m.prototype.notify=m.prototype.fail=m.prototype._unreport=m.prototype._report=z;m.prototype._state=0;m.prototype.state=function(){return this._state};m.prototype.join=function(){var e=this;while(e.handler!==void 0){e=e.handler}return e};m.prototype.chain=function(e,t,n,r,i){this.when({resolver:e,receiver:t,fulfilled:n,rejected:r,progress:i})};m.prototype.visit=function(e,t,n,r){this.chain(y,e,t,n,r)};m.prototype.fold=function(e,t,n,r){this.visit(r,function(r){e.call(n,t,r,this)},r.reject,r.notify)};U(m,g);g.prototype.become=function(e){e.fail()};var y=new g;U(m,b);b.prototype._state=0;b.prototype.resolve=function(e){this.become(p(e))};b.prototype.reject=function(e){if(this.resolved){return}this.become(new T(e))};b.prototype.join=function(){if(!this.resolved){return this}var e=this;while(e.handler!==void 0){e=e.handler;if(e===this){return this.handler=A()}}return e};b.prototype.run=function(){var e=this.consumers;var t=this.join();this.consumers=void 0;for(var n=0;n<e.length;++n){t.when(e[n])}};b.prototype.become=function(e){if(this.resolved){return}this.resolved=true;this.handler=e;if(this.consumers!==void 0){n.enqueue(this)}if(this.context!==void 0){e._report(this.context)}};b.prototype.when=function(e){if(this.resolved){n.enqueue(new O(e,this.handler))}else{if(this.consumers===void 0){this.consumers=[e]}else{this.consumers.push(e)}}};b.prototype.notify=function(e){if(!this.resolved){n.enqueue(new M(e,this))}};b.prototype.fail=function(e){var t=typeof e==="undefined"?this.context:e;this.resolved&&this.handler.join().fail(t)};b.prototype._report=function(e){this.resolved&&this.handler.join()._report(e)};b.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()};U(m,w);w.prototype.when=function(e){n.enqueue(new O(e,this))};w.prototype._report=function(e){this.join()._report(e)};w.prototype._unreport=function(){this.join()._unreport()};U(b,E);U(m,S);S.prototype._state=1;S.prototype.fold=function(e,t,n,r){j(e,t,this,n,r)};S.prototype.when=function(e){B(e.fulfilled,this,e.receiver,e.resolver)};var x=0;U(m,T);T.prototype._state=-1;T.prototype.fold=function(e,t,n,r){r.become(this)};T.prototype.when=function(e){if(typeof e.rejected==="function"){this._unreport()}B(e.rejected,this,e.receiver,e.resolver)};T.prototype._report=function(e){n.afterQueue(new N(this,e))};T.prototype._unreport=function(){this.handled=true;n.afterQueue(new C(this))};T.prototype.fail=function(e){i.onFatalRejection(this,e===void 0?this.context:e)};N.prototype.run=function(){if(!this.rejection.handled){this.rejection.reported=true;i.onPotentiallyUnhandledRejection(this.rejection,this.context)}};C.prototype.run=function(){if(this.rejection.reported){i.onPotentiallyUnhandledRejectionHandled(this.rejection)}};i.createContext=i.enterContext=i.exitContext=i.onPotentiallyUnhandledRejection=i.onPotentiallyUnhandledRejectionHandled=i.onFatalRejection=z;var k=new m;var L=new i(m,k);O.prototype.run=function(){this.handler.join().when(this.continuation)};M.prototype.run=function(){var e=this.handler.consumers;if(e===void 0){return}for(var t,n=0;n<e.length;++n){t=e[n];F(t.progress,this.value,this.handler,t.receiver,t.resolver)}};_.prototype.run=function(){function t(t){e.resolve(t)}function n(t){e.reject(t)}function r(t){e.notify(t)}var e=this.resolver;D(this._then,this.thenable,t,n,r)};return i}})})(typeof e==="function"&&e.amd?e:function(e){n.exports=e()})},{}]},{},[11])(11)})